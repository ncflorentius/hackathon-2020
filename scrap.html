for( var i = 0;  i < places.length;  i++ ) {
    addPlace( places[i] );
}

function addPlace( place ) {
    var content = '<strong>Text: ' + place.text + '</strong>';
    var infowindow = new google.maps.InfoWindow({
        content: content    
    });

    var image = '/js/markers/' + place.image + '.png';
    var latlng = new google.maps.LatLng( place.lat, place.lng );
    var marker = new google.maps.Marker({
        position: latlng,
        title: place.title,
        icon: image
    });

    marker.setMap( map );

    google.maps.event.addListener( marker, 'click', function() {
        infowindow.open( map, marker );
    });
}
}

function loadScript() {
var script = document.createElement("script");
script.type = "text/javascript";
script.src = "http://maps.googleapis.com/maps/api/js&sensor=false&callback=initialize";
document.body.appendChild(script);
}

window.onload = loadScript;